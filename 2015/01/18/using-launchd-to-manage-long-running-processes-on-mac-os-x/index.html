
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using Launchd to Manage Long Running Processes on Mac OS X - Urban Hafner</title>
  <meta name="author" content="Urban Hafner">

  
  <meta name="description" content="I recently had the need to have a long running, user defined process
on my Mac. At first I thought about using
Monit or
Inspeqtor, but then
Jérémy &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bettong.net/2015/01/18/using-launchd-to-manage-long-running-processes-on-mac-os-x">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/articles.atom" rel="alternate" title="Urban Hafner" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Urban Hafner</a></h1>
  
    <h2>Ruby, Ruby on Rails, JavaScript programmer. Dabbling with Rust and agile methodologies on the side.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/articles.atom" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="bettong.net">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://urbanhafner.com/contact">Contact</a></li>
  <li><a href="http://urbanhafner.com/resume">CV</a></li>
  <li><a href="/reading-list">Reading List</a></li>
  <li><a href="http://urbanhafnerphotography.com/">Photography</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Using Launchd to Manage Long Running Processes on Mac OS X</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-18T13:23:05+01:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:23 pm</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://bettong.net">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I recently had the need to have a long running, user defined process
on my Mac. At first I thought about using
<a href="http://mmonit.com/monit/">Monit</a> or
<a href="https://github.com/mperham/inspeqtor">Inspeqtor</a>, but then
<a href="https://jeremy.wordpress.com/">Jérémy Lecour</a>
<a href="https://twitter.com/jlecour/status/556388096246562816">pointed out to me</a>
that I could just use the built in <a href="http://launchd.info/">launchd</a>.</p>

<p>Lauchd can automatically start processes on startup and it can monitor
them and restart them should they abort. Adding one yourself is rather
easy. You create a file in <code>~/Library/LaunchAgents</code> in a certain
format. Here&rsquo;s one of mine:</p>

<!-- more -->




<figure class='code'><figcaption><span>gnugo13x13.plist</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
</span><span class='line'><span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;dict&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>gnugo13x13<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;array&gt;</span>
</span><span class='line'>      <span class="nt">&lt;string&gt;</span>/Users/uh/bin/cgosGnuGo13x13<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/array&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>KeepAlive<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;true/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>RunAtLoad<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;true/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>StandardOutPath<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>/Users/uh/Library/Logs/CGOS/gnugo13x13.stdout<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>StandardErrorPath<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>/Users/uh/Library/Logs/CGOS/gnugo13x13.stderr<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/dict&gt;</span>
</span><span class='line'><span class="nt">&lt;/plist&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you notify launchd of your new file by running <code>lauchnctl load
~/Library/LaunchAgents/gnugo13x13.plist</code> and you should see a new line
in your <code>system.log</code> (accessible through
<a href="http://en.wikipedia.org/wiki/Console_%28OS_X%29">Console.app</a>). If
all goes well then that&rsquo;s all you will see there, but if starting the
log didn&rsquo;t work you will see that mentioned in the <code>system.log</code>, too.</p>

<p>Now let&rsquo;s go through the interesting parts of that file. As you may
have already guessed we essentially setup key value pairs here. An XML
element <code>key</code> defines the key name and the next element defines the
value.</p>

<p><code>Label</code> is the name of your job. It needs to be unique and it
is used in the <code>system.log</code> whenever there is something happening
(stop, start, crash, &hellip;) with your job.</p>

<p><code>ProgramArguments</code> is an array of strings that make up your system
call. The first one is the path to the executable you want to run, and
the others are command line arguments. If you don&rsquo;t have any command
line arguments you can just use <code>Program</code>. So, I probably should have
used <code>Program</code> in my example file, but that&rsquo;s the actual file from my
system and it works, so why change it, right? ;)</p>

<p><code>KeepAlive</code> is optional and means that launchd will restart your job
should it terminate. <code>RunAtLoad</code> is necessary to automatically start
your job when you turn on your computer.</p>

<p>The last two, <code>StandardOutPath</code> and <code>StandardErrorPath</code> should be self
explanatory. They are paths to files that will be used to log the
stdout and stderr of your job. There&rsquo;s just one thing you need to keep
in mind. The folder where these files reside needs to exist before you
start the job. It will be created by launchd for you, but it will be
owned by root and therefore the job won&rsquo;t be able to write in there
and the job will fail.</p>

<p>Detailed information on everything that you can do with launchd can be
found at <a href="http://launchd.info/">launchd.info</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Urban Hafner</span></span>

      




<time class='entry-date' datetime='2015-01-18T13:23:05+01:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:23 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/inspeqtor/'>inspeqtor</a>, <a class='category' href='/blog/categories/launchd/'>launchd</a>, <a class='category' href='/blog/categories/monit/'>monit</a>, <a class='category' href='/blog/categories/process-monitoring/'>process monitoring</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://bettong.net/2015/01/18/using-launchd-to-manage-long-running-processes-on-mac-os-x/" data-via="" data-counturl="http://bettong.net/2015/01/18/using-launchd-to-manage-long-running-processes-on-mac-os-x/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2015/01/07/iomrascalai-a-great-way-to-learn-rust-or-about-ai/" title="Previous Post: Iomrascálaí: A great way to learn Rust or about AI">&laquo; Iomrascálaí: A great way to learn Rust or about AI</a>
      
      
        <a class="basic-alignment right" href="/2015/07/03/why-every-agile-team-should-include-a-tester/" title="Next Post: Why every agile team should include a tester">Why every agile team should include a tester &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Pair Programming</h1>
  <p>
    I&#8217;m always happy to pair program. Either
    on <a href="http://github.com/ujh/iomrascalai">Iomrascálaí</a>
    (written in <a href="http://rust-lang.org">Rust</a>) or on any
    Ruby, Ruby on Rails, or JavaScript project.
  </p>
  <p>
    Just <a href="mailto:contact@urbanhafner.com">send me an email</a>
    and we can set something up!
  </p>
</section>
<section>
  <h1>Categories</h1>
  <ul id="category-list"><li><a href='/blog/categories/agile'>agile (1)</a></li><li><a href='/blog/categories/ai'>ai (3)</a></li><li><a href='/blog/categories/artificial-intelligence'>artificial intelligence (3)</a></li><li><a href='/blog/categories/baduk'>baduk (3)</a></li><li><a href='/blog/categories/book-club'>book club (5)</a></li><li><a href='/blog/categories/book-review'>book review (2)</a></li><li><a href='/blog/categories/books'>books (1)</a></li><li><a href='/blog/categories/ci'>ci (2)</a></li><li><a href='/blog/categories/compile-time-polymorphism'>compile time polymorphism (1)</a></li><li><a href='/blog/categories/concurrency'>concurrency (2)</a></li><li><a href='/blog/categories/continuous-integration'>continuous integration (2)</a></li><li><a href='/blog/categories/eloquent-ruby'>eloquent ruby (4)</a></li><li><a href='/blog/categories/emacs'>emacs (1)</a></li><li><a href='/blog/categories/go'>go (3)</a></li><li><a href='/blog/categories/goos'>goos (1)</a></li><li><a href='/blog/categories/hack'>hack (1)</a></li><li><a href='/blog/categories/hexagonal-rails'>hexagonal rails (1)</a></li><li><a href='/blog/categories/inspeqtor'>inspeqtor (1)</a></li><li><a href='/blog/categories/iomrascálaí'>iomrascálaí (4)</a></li><li><a href='/blog/categories/jim-weirich'>jim weirich (1)</a></li><li><a href='/blog/categories/launchd'>launchd (1)</a></li><li><a href='/blog/categories/learning-rust'>learning rust (5)</a></li><li><a href='/blog/categories/learning-rust-tasks-and-messages'>learning rust tasks and messages (2)</a></li><li><a href='/blog/categories/lisp'>lisp (1)</a></li><li><a href='/blog/categories/management'>management (1)</a></li><li><a href='/blog/categories/matt-wynne'>matt wynne (1)</a></li><li><a href='/blog/categories/monit'>monit (1)</a></li><li><a href='/blog/categories/pair-programming'>pair programming (2)</a></li><li><a href='/blog/categories/polymorphism'>polymorphism (1)</a></li><li><a href='/blog/categories/process-monitoring'>process monitoring (1)</a></li><li><a href='/blog/categories/programming'>programming (6)</a></li><li><a href='/blog/categories/qa'>qa (1)</a></li><li><a href='/blog/categories/quality-assurance'>quality assurance (1)</a></li><li><a href='/blog/categories/rails'>rails (1)</a></li><li><a href='/blog/categories/review'>review (2)</a></li><li><a href='/blog/categories/ruby'>ruby (6)</a></li><li><a href='/blog/categories/ruby-on-rails'>ruby on rails (2)</a></li><li><a href='/blog/categories/rust'>rust (8)</a></li><li><a href='/blog/categories/sass'>sass (1)</a></li><li><a href='/blog/categories/sass-rails'>sass-rails (1)</a></li><li><a href='/blog/categories/scrum'>scrum (1)</a></li><li><a href='/blog/categories/stainless'>stainless (1)</a></li><li><a href='/blog/categories/tasks'>tasks (2)</a></li><li><a href='/blog/categories/tdd'>tdd (1)</a></li><li><a href='/blog/categories/testing'>testing (2)</a></li><li><a href='/blog/categories/travis-ci'>travis ci (1)</a></li><li><a href='/blog/categories/weiqi'>weiqi (3)</a></li><li><a href='/blog/categories/workaround'>workaround (1)</a></li></ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Urban Hafner -
  <a href="/imprint">Imprint</a>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'bettong-net';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://bettong.net/2015/01/18/using-launchd-to-manage-long-running-processes-on-mac-os-x/';
        var disqus_url = 'http://bettong.net/2015/01/18/using-launchd-to-manage-long-running-processes-on-mac-os-x/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100625780); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100625780ns.gif" /></p></noscript>


</body>
</html>
